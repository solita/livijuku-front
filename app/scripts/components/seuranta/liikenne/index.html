<form name="{{liikennetyyppi + 'liikennesuoritteet'}}">
  <div class="table-responsive">
    <table class="table table-hover table-condensed">
      <tr>
        <th>Suoritetyyppi</th>
        <th>Suoritteen nimi</th>
        <th>
          <div tooltip="Linja-autojen lukumäärä" tooltip-placement="top"
               tooltip-append-to-body="true">Linja-autot
               <span class="glyphicon glyphicon-question-sign"></span>
          </div>
        </th>
        <th>
          <div tooltip="Taksien lukumäärä" tooltip-placement="top"
               tooltip-append-to-body="true">Taksit
               <span class="glyphicon glyphicon-question-sign"></span>
          </div>
        </th>
        <th>
          <div tooltip="Paikallisliikenteen ajokilometrit"
               tooltip-append-to-body="true">Ajokilometrit
               <span class="glyphicon glyphicon-question-sign"></span>
          </div>
        </th>
        <th>
          <div tooltip="Paikallisliikenteen matkustajamäärä" tooltip-placement="top"
               tooltip-append-to-body="true">Matkustaja-määrä
               <span class="glyphicon glyphicon-question-sign"></span>
          </div>
        </th>
        <th>
          <div tooltip="Saadut matkalipputulot" tooltip-placement="top"
               tooltip-append-to-body="true">Lipputulo
               <span class="glyphicon glyphicon-question-sign"></span>
          </div>
        </th>
        <th>
          <div tooltip="Kaupungin liikennöitsijöille maksama hinta, sisältää valtionavun"
               tooltip-placement="top"
               tooltip-append-to-body="true">Nettohinta
               <span class="glyphicon glyphicon-question-sign"></span>
          </div>
        </th>
        <th>
          <div tooltip="Lipputulo + nettohinta" tooltip-placement="top"
               tooltip-append-to-body="true">Bruttohinta
               <span class="glyphicon glyphicon-question-sign"></span>
          </div>
        </th>
        <th ng-hide="isReadonly()">Toiminnot</th>
      </tr>
      </thead>
      <tfoot>
        <tr>
          <td>
            <span class="yhteensa">Yhteensä:</span>
          </td>
          <td></td>
          <td>{{linjaautotSumma() | currency : '' : 0}}</td>
          <td>{{taksitSumma() | currency : '' : 0}}</td>
          <td>{{ajokmSumma() | currency : 'km'}}</td>
          <td>{{matkustajatSumma() | currency : '' : 0}}</td>
          <td>{{lipputuloSumma() | currency}}</td>
          <td>{{nettohintaSumma() | currency}}</td>
          <td>{{bruttohintaSumma() | currency}}</td>
          <td></td>
        </tr>
      </tfoot>
      <tbody>
        <tr ng-repeat="rivi in suoritteet track by $index">
          <td><select name="suoritetyyppitunnus" ng-model="rivi.suoritetyyppitunnus" ng-disabled="isReadonly()">
            <option value="LS">Linjasuorite</option>
            <option value="SS">Sopimussuorite</option>
            <option value="KS">Kokonaissuorite</option>
          </select></td>
          <td>
            <div class="form-group has-feedback" show-errors="{ showSuccess: true }"
                 tooltip="{{inputs.nimi.$error.required ? 'Nimi on pakollinen tieto.' :
                            inputs.nimi.$error.minlength ? 'Nimen pituus pitää olla vähintään 2 merkkiä.' : ''}}"
                 tooltip-placement="top">

              <label for="{{'nimi' + rivi.numero}}" class="sr-only">Nimi</label>
              <input name="{{'nimi' + rivi.numero}}" type="text" class="form-control" noenter required ng-minlength="2"
                     bind-model="nimi"
                     ng-minlength="1" placeholder="Nimi"
                     select-on-click
                     ng-readonly="isReadonly()"
                     ng-model="rivi.nimi">
              <span ng-show="inputs.nimi.$invalid"
                    class="glyphicon glyphicon-warning-sign form-control-feedback"
                    aria-hidden="true"></span>
            </div>
          </td>
          <td>
            <form-group-compact name="'linjaautot' + rivi.numero" input="inputs.linjaautot"
                                errormessage="inputs.linjaautot.$error.number ? 'Tähän pitää syöttää kokonaisluku.' : ''">
              <input bind-model="linjaautot"
                     ng-model="rivi.linjaautot"
                     type="number" numeric-integer-only="" select-on-click
                     ng-readonly="isReadonly()">
            </form-group-compact>
          </td>
          <td>
            <form-group-compact name="'taksit' + rivi.numero" input="inputs.taksit"
                                errormessage="inputs.taksit.$error.number ? 'Tähän pitää syöttää kokonaisluku.' : ''">
              <input bind-model="taksit"
                     ng-model="rivi.taksit"
                     type="number" numeric-integer-only="" select-on-click
                     ng-readonly="isReadonly()">
            </form-group-compact>
          </td>
          <td><input name="ajokilometrit" type="text" class="form-control" numeric-km-only="" ng-currency=""
                     ng-readonly="isReadonly()"
                     currency-symbol="km" noenter
                     select-on-click
                     ng-model="rivi.ajokilometrit"></td>
          <td><input name="matkustajamaara" type="number" class="form-control" numeric-integer-only="" noenter
                     ng-readonly="isReadonly()"
                     select-on-click
                     ng-model="rivi.matkustajamaara"></td>
          <td><input name="lipputulo" type="text" class="form-control" ng-currency="" numeric-only="" noenter
                     ng-readonly="isReadonly()"
                     select-on-click
                     ng-model="rivi.lipputulo"></td>
          <td><input name="nettohinta" type="text" class="form-control" ng-currency="" numeric-only="" noenter
                     ng-readonly="isReadonly()"
                     select-on-click
                     ng-model="rivi.nettohinta"></td>
          <td>{{laskeBruttohinta($index) | currency}}</td>
          <td><a href="" ng-click="poistaPaikallisliikenneRivi($index)" ng-hide="isReadonly()"><span
            class="glyphicon glyphicon-remove-sign"></span> Poista</a>
          </td>
        </tr>
      </tbody>
    </table>

    <button ng-hide="isReadonly()" class="btn btn-primary" ng-click="lisaaSuorite()">Lisää uusi rivi</button>
  </div>
</form>
